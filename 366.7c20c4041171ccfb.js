"use strict";(self.webpackChunkblockcore=self.webpackChunkblockcore||[]).push([[366],{4366:(b,c,s)=>{s.r(c),s.d(c,{RichlistModule:()=>$});var d=s(4521),p=s(7423),g=s(9832),v=s(4834),f=s(5245),u=s(2181),m=s(5899),Z=s(508),T=s(2638),R=s(4847),C=s(4999),x=s(3251),A=s(7455),U=s(1244),J=s(4466),y=s(4107),H=s(7531),L=s(9828),S=s(7238),O=s(7261),I=s(9837),N=s(7237),B=s(5486),a=s(5861),t=s(5e3),M=s(5830),Q=s(9205),h=s(9808),F=s(1656),Y=s(2419),D=s(809);function E(i,l){1&i&&(t.TgZ(0,"app-progress",3),t._uU(1,"Loading richlist..."),t.qZA())}const V=function(i){return["../../explorer/address/",i]};function X(i,l){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"span",9),t._uU(2),t.qZA(),t.TgZ(3,"span",10),t.TgZ(4,"a",11),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",12),t.ALo(7,"amountHtml"),t.qZA()),2&i){const n=l.$implicit,o=l.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Q6J("routerLink",t.VKq(6,V,n.address)),t.xp6(1),t.Oqu(n.address),t.xp6(1),t.Q6J("innerHTML",t.lcZ(7,4,n.balance),t.oJD)}}function j(i,l){1&i&&(t.TgZ(0,"app-progress",3),t._uU(1,"Loading richlist..."),t.qZA())}function P(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",4),t.TgZ(2,"span"),t._uU(3,"Rank"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Address"),t.qZA(),t.TgZ(6,"span",5),t._uU(7,"Balance"),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.NdJ("onScroll",function(e){return t.CHM(n),t.oxw().onScroll(e)}),t.YNc(9,X,8,8,"div",7),t._UZ(10,"br"),t.YNc(11,j,2,0,"app-progress",1),t.qZA(),t.qZA()}if(2&i){const n=t.oxw();t.xp6(8),t.Q6J("bottomOffset",400)("topOffset",400),t.xp6(1),t.Q6J("ngForOf",n.addresses),t.xp6(2),t.Q6J("ngIf",n.loading)}}const W=[{path:"",component:(()=>{class i{constructor(n,o){this.api=n,this.setup=o,this.hostClass=!0,this.addresses=null,this.count=0,this.maxCount=2,this.limit=20,this.loading=!1}scrollHandler(n){console.log("Scroll Event")}ngOnInit(){var n=this;this.subscription=this.setup.currentChain$.subscribe(function(){var o=(0,a.Z)(function*(e){yield n.updateRichlist("/api/insight/richlist?limit="+n.limit)});return function(e){return o.apply(this,arguments)}}())}updateRichlist(n){var o=this;return(0,a.Z)(function*(){if(console.log("url: ",n),!n)return;const e=o.api.baseUrl.replace("/api",""),r=yield o.api.request(e+n);o.total=r.headers.get("Pagination-Total");const z=r.headers.get("Link"),G=o.api.parseLinkHeader(z);o.link=G.next;const K=yield r.json();o.addresses||(o.addresses=[]),o.addresses=[...o.addresses,...K],o.count++})()}onScroll(n){var o=this;return(0,a.Z)(function*(){console.log("scroll occurred",n),n.isReachingBottom&&(console.log("the user is reaching the bottom"),o.loading=!0,setTimeout((0,a.Z)(function*(){console.log("UPDATE RICH LIST",o.link),yield o.updateRichlist(o.link),o.loading=!1}))),n.isReachingTop&&console.log("the user is reaching the top"),n.isWindowEvent&&console.log("This event is fired on Window not on an element.")})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(M.s),t.Y36(Q.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-richlist"]],hostVars:2,hostBindings:function(n,o){1&n&&t.NdJ("scroll",function(r){return o.scrollHandler(r)}),2&n&&t.ekj("content-centered-top",o.hostClass)},decls:5,vars:2,consts:[[1,"box"],["class","centered",4,"ngIf"],[4,"ngIf"],[1,"centered"],[1,"grid-header","richlist"],[1,"right"],["appDetectScroll","",1,"scrollable",3,"bottomOffset","topOffset","onScroll"],["class","grid grid-odd-line richlist",4,"ngFor","ngForOf"],[1,"grid","grid-odd-line","richlist"],[1,"center"],[1,""],[3,"routerLink"],[1,"right","number",3,"innerHTML"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h3"),t._uU(2,"Richlist"),t.qZA(),t.YNc(3,E,2,0,"app-progress",1),t.YNc(4,P,12,4,"div",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngIf",!o.addresses),t.xp6(1),t.Q6J("ngIf",o.addresses))},directives:[h.O5,F.t,Y.f,h.sg,d.yS],pipes:[D.N],encapsulation:2}),i})()}];let $=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(W),p.ot,g.vV,v.t,f.Ps,u.Tx,m.Cv,Z.si,T.SJ,R.JX,C.p0,x.Nh,U.X,A.y4,J.m,y.LD,H.c,L.d,S.AV,O.ZX,I.t,N.q,B.T]]}),i})()}}]);