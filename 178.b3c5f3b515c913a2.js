"use strict";(self.webpackChunkblockcore=self.webpackChunkblockcore||[]).push([[178],{1178:(D,h,e)=>{e.r(h),e.d(h,{BlocksModule:()=>G});var f=e(4521),i=e(7423),b=e(9832),C=e(4834),v=e(5245),y=e(2181),Z=e(5899),A=e(508),B=e(2638),g=e(4847),I=e(4999),m=e(3251),T=e(7455),s=e(1244),r=e(4466),u=e(4107),a=e(7531),k=e(9828),U=e(7238),J=e(7261),P=e(9837),S=e(7237),L=e(5486),x=e(5861),t=e(5e3),Q=e(5830),N=e(9205),_=e(9808),H=e(9364),W=e(1656),Y=e(2419);function K(o,c){if(1&o&&(t.TgZ(0,"div",20),t._UZ(1,"mat-icon",13),t.TgZ(2,"div",21),t._uU(3),t.qZA(),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("svgIcon","heroicons_solid:badge-check"),t.xp6(2),t.Oqu(null==n.setup.Chain?null:n.setup.Chain.Description)}}function R(o,c){if(1&o&&(t.TgZ(0,"blockcore-block",24),t._UZ(1,"mat-icon",25),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t.TgZ(4,"span"),t._uU(5,"Latest blocks: "),t.qZA(),t.TgZ(6,"span",28),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("svgIcon","heroicons_outline:cube"),t.xp6(6),t.Oqu(n.total)}}function q(o,c){1&o&&t._UZ(0,"app-progress")}const F=function(o){return["../block",o]};function j(o,c){if(1&o&&(t.TgZ(0,"blockcore-block",31),t._UZ(1,"mat-icon",32),t.TgZ(2,"div",33),t.TgZ(3,"div",34),t.TgZ(4,"a",35),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",36),t._uU(7),t.ALo(8,"date"),t.qZA(),t.qZA(),t.TgZ(9,"div",26),t.TgZ(10,"div",37),t.ynx(11),t.TgZ(12,"div",38),t.TgZ(13,"div",39),t._uU(14,"Transaction Count:"),t.qZA(),t.TgZ(15,"div",40),t._uU(16),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t._UZ(17,"div",41),t.qZA()),2&o){const n=c.$implicit;t.xp6(1),t.MGl("matTooltip","size: ",(n.blockSize/1024).toFixed(2),""),t.Q6J("svgIcon","heroicons_outline:cube"),t.xp6(3),t.Q6J("routerLink",t.VKq(10,F,n.blockIndex)),t.xp6(1),t.Oqu(n.blockIndex),t.xp6(2),t.Oqu(t.xi3(8,7,1e3*n.blockTime,"dd/MM/yyyy hh:mm")),t.xp6(8),t.MGl("matTooltip","Transaction Count: ",n.transactionCount,""),t.xp6(1),t.Oqu(n.transactionCount)}}function w(o,c){1&o&&t._UZ(0,"app-progress")}function z(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",29),t.NdJ("onScroll",function(p){return t.CHM(n),t.oxw(2).onScroll(p)}),t.YNc(2,j,18,12,"blockcore-block",30),t.YNc(3,w,1,0,"app-progress",23),t.qZA(),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("bottomOffset",400)("topOffset",400),t.xp6(1),t.Q6J("ngForOf",n.blocks),t.xp6(1),t.Q6J("ngIf",n.loading)}}function X(o,c){if(1&o&&(t._UZ(0,"app-search"),t.YNc(1,R,8,2,"blockcore-block",22),t.YNc(2,q,1,0,"app-progress",23),t.YNc(3,z,4,4,"div",23)),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.total),t.xp6(1),t.Q6J("ngIf",!n.blocks),t.xp6(1),t.Q6J("ngIf",n.blocks)}}const V=[{path:"",component:(()=>{class o{constructor(n,l){this.api=n,this.setup=l,this.hostClass=!0,this.blocks=null,this.count=0,this.maxCount=2,this.limit=20,this.loading=!1}scrollHandler(n){}ngOnInit(){var n=this;return(0,x.Z)(function*(){n.subscription=n.setup.currentChain$.subscribe(function(){var l=(0,x.Z)(function*(p){yield n.updateBlocks("/api/query/block?offset=&limit="+n.limit)});return function(p){return l.apply(this,arguments)}}())})()}ngOnDestroy(){clearTimeout(this.timerInfo),clearTimeout(this.timerBlocks),this.subscription.unsubscribe()}updateBlocks(n){var l=this;return(0,x.Z)(function*(){if(!n)return;const p=l.api.baseUrl.replace("/api",""),d=yield l.api.request(p+n);l.total=d.headers.get("Pagination-Total");const $=d.headers.get("Link"),tt=l.api.parseLinkHeader($);l.link=tt.previous;const E=yield d.json();E.sort((O,M)=>M.blockIndex===O.blockIndex?0:M.blockIndex<O.blockIndex?-1:M.blockIndex>O.blockIndex?1:void 0),l.blocks||(l.blocks=[]),l.blocks=[...l.blocks,...E],l.count++})()}onScroll(n){var l=this;return(0,x.Z)(function*(){n.isReachingBottom&&(l.loading=!0,setTimeout((0,x.Z)(function*(){yield l.updateBlocks(l.link),l.loading=!1})))})()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Q.s),t.Y36(N.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blocks-component"]],hostVars:2,hostBindings:function(n,l){1&n&&t.NdJ("scroll",function(d){return l.scrollHandler(d)}),2&n&&t.ekj("content-centered-top",l.hostClass)},decls:23,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-12"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex-0","w-16","h-16","rounded-full","overflow-hidden"],[1,"w-full","h-full",3,"src"],[1,"flex","flex-col","min-w-0","ml-4"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3","hidden","md:block"],["target","_blank","target","_blank",3,"href"],["mat-flat-button","",1,"blockcore-mat-button-rounded",3,"color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"flex-auto","border-t","-mt-px","pt-4","sm:pt-6"],[1,"w-full","max-w-screen-xl","mx-auto"],[1,"sm:px-2",3,"animationDuration"],["label","Blocks"],["matTabContent",""],[1,"flex","items-center"],[1,"ml-1.5","leading-6","truncate","text-secondary"],["class","flex items-center w-full p-6 filter-info ",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","w-full","p-6","filter-info"],[1,"icon-size-22","mr-6","text-blue-500",3,"svgIcon"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight","break-all"],[1,"text-primary"],["appDetectScroll","",3,"bottomOffset","topOffset","onScroll"],["class","flex items-center w-full p-6 filter-info justify-between",4,"ngFor","ngForOf"],[1,"flex","items-center","w-full","p-6","filter-info","justify-between"],[1,"icon-size-12","mr-6",3,"svgIcon","matTooltip"],[1,"flex","flex-col","w-full"],[1,"text-2xl","font-semibold","leading-tight","text-primary"],[3,"routerLink"],[1,"text-md","text-secondary"],[1,"text-1xl","font-semibold","leading-tight"],[1,"font-semibold","tracking-tight","leading-7","md:leading-snug","truncate","inline-flex","mat-flat-button"],[1,"hidden","md:block","mr-3"],[1,"inline-flex","text-primary",3,"matTooltip"],[1,"flex"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t._UZ(6,"img",6),t.qZA(),t.TgZ(7,"div",7),t.ynx(8),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.BQk(),t.YNc(11,K,4,2,"div",9),t.qZA(),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"a",11),t.TgZ(14,"button",12),t._UZ(15,"mat-icon",13),t.TgZ(16,"span",14),t._uU(17,"Website"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"mat-tab-group",17),t.TgZ(21,"mat-tab",18),t.YNc(22,X,4,3,"ng-template",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(6),t.s9C("src",null==l.setup.Chain?null:l.setup.Chain.Icon,t.LSH),t.xp6(4),t.hij(" ",null==l.setup.Chain?null:l.setup.Chain.Symbol," "),t.xp6(1),t.Q6J("ngIf",null==l.setup.Chain?null:l.setup.Chain.Description),t.xp6(2),t.s9C("href",null==l.setup.Chain?null:l.setup.Chain.Url,t.LSH),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:chevron-double-right"),t.xp6(5),t.Q6J("animationDuration","0"))},directives:[_.O5,v.Hw,i.lW,m.SP,m.uX,m.Vc,H.g,W.t,Y.f,_.sg,U.gM,f.yS],pipes:[_.uU],encapsulation:2}),o})()}];let G=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(V),i.ot,b.vV,C.t,v.Ps,y.Tx,Z.Cv,A.si,B.SJ,g.JX,I.p0,m.Nh,s.X,T.y4,r.m,u.LD,a.c,k.d,U.AV,J.ZX,P.t,S.q,L.T]]}),o})()},9364:(D,h,e)=>{e.d(h,{g:()=>I});var f=e(5861),i=e(5e3),b=e(5830),C=e(9205),v=e(4521),y=e(7261),Z=e(7322),A=e(5245),B=e(7531),g=e(3075);let I=(()=>{class m{constructor(s,r,u,a){this.api=s,this.setup=r,this.router=u,this._snackBar=a,this.scheme=JSON.parse(localStorage.getItem("config")).scheme}ngOnDestroy(){}ngOnInit(){return(0,f.Z)(function*(){})()}inputType(s){return s.startsWith(this.setup.Network.NetworkWitnessPrefix)?"address":s.length<20?"index":s.length>30&&s.length<54?"address":"hash"}search(){var s=this;return(0,f.Z)(function*(){const r=s.searchTerm;switch(s.inputType(r)){case"index":{const a=parseInt(r,10);NaN!==a&&a>0?s.router.navigate([s.setup.current,"explorer","block",a]):s._snackBar.open("Explorer cannot detect your data type","retry",{duration:3e3,panelClass:[s.scheme]});break}case"address":s.router.navigate([s.setup.current,"explorer","address",r]);break;case"hash":{let a=null;try{a=yield s.api.getBlockByHash(r)}catch(k){}if(a)s.router.navigate([s.setup.current,"explorer","block",a.blockHash]);else{const k=yield s.api.getTransaction(r);s.router.navigate([s.setup.current,"explorer","transaction",k.transactionId])}break}default:s._snackBar.open("Explorer cannot detect your data type","retry",{duration:3e3,panelClass:[s.scheme]})}})()}}return m.\u0275fac=function(s){return new(s||m)(i.Y36(b.s),i.Y36(C.U),i.Y36(v.F0),i.Y36(y.ux))},m.\u0275cmp=i.Xpm({type:m,selectors:[["app-search"]],decls:8,vars:3,consts:[[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-1","gap-6","w-full","min-w-0","mb-6"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"w-full","max-w-screen-xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","max-w-full","sm:max-w-none"],[1,"blockcore-mat-no-subscript","w-full","sm:w-full","mt-6","sm:mt-6","mb-6","sm:mb-6","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["type","search","placeholder","Search for address, transaction or block.","autocomplete","off","matInput","",3,"ngModel","keyup.enter","ngModelChange"],["query",""]],template:function(s,r){1&s&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"mat-form-field",4),i._UZ(5,"mat-icon",5),i.TgZ(6,"input",6,7),i.NdJ("keyup.enter",function(){return r.search()})("ngModelChange",function(a){return r.searchTerm=a}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&s&&(i.xp6(4),i.Q6J("floatLabel","always"),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:search"),i.xp6(1),i.Q6J("ngModel",r.searchTerm))},directives:[Z.KE,A.Hw,Z.qo,B.Nt,g.Fj,g.JJ,g.On],encapsulation:2}),m})()}}]);