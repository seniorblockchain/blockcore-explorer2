"use strict";(self.webpackChunkblockcore=self.webpackChunkblockcore||[]).push([[366],{4366:(A,h,s)=>{s.r(h),s.d(h,{RichlistModule:()=>K});var a=s(4521),m=s(7423),v=s(9832),Z=s(4834),e=s(5245),p=s(2181),r=s(5899),u=s(508),g=s(2638),R=s(4847),C=s(4999),x=s(3251),U=s(7455),y=s(1244),O=s(4466),M=s(4107),H=s(7531),J=s(9828),L=s(7238),P=s(7261),S=s(9837),E=s(7237),F=s(5486),f=s(5861),t=s(5e3),I=s(5830),Y=s(9205),T=s(9808),B=s(1656),N=s(2419),D=s(809);function Q(i,l){1&i&&(t.TgZ(0,"app-progress",3),t._uU(1,"Loading richlist..."),t.qZA())}const j=function(i){return["../../explorer/address/",i]};function V(i,l){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"span",9),t._uU(2),t.qZA(),t.TgZ(3,"span",10),t.TgZ(4,"a",11),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",12),t.ALo(7,"amountHtml"),t.qZA()),2&i){const n=l.$implicit,o=l.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Q6J("routerLink",t.VKq(6,j,n.address)),t.xp6(1),t.Oqu(n.address),t.xp6(1),t.Q6J("innerHTML",t.lcZ(7,4,n.balance),t.oJD)}}function W(i,l){1&i&&(t.TgZ(0,"app-progress",3),t._uU(1,"Loading richlist..."),t.qZA())}function X(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",4),t.TgZ(2,"span"),t._uU(3,"Rank"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Address"),t.qZA(),t.TgZ(6,"span",5),t._uU(7,"Balance"),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.NdJ("onScroll",function(c){return t.CHM(n),t.oxw().onScroll(c)}),t.YNc(9,V,8,8,"div",7),t._UZ(10,"br"),t.YNc(11,W,2,0,"app-progress",1),t.qZA(),t.qZA()}if(2&i){const n=t.oxw();t.xp6(8),t.Q6J("bottomOffset",400)("topOffset",400),t.xp6(1),t.Q6J("ngForOf",n.addresses),t.xp6(2),t.Q6J("ngIf",n.loading)}}const $=[{path:"",component:(()=>{class i{constructor(n,o){this.api=n,this.setup=o,this.hostClass=!0,this.addresses=null,this.count=0,this.maxCount=2,this.limit=20,this.loading=!1}scrollHandler(n){console.log("Scroll Event")}ngOnInit(){var n=this;this.subscription=this.setup.currentChain$.subscribe(function(){var o=(0,f.Z)(function*(c){yield n.updateRichlist("/api/insight/richlist?limit="+n.limit)});return function(c){return o.apply(this,arguments)}}())}updateRichlist(n){var o=this;return(0,f.Z)(function*(){if(console.log("url: ",n),!n)return;const c=o.api.baseUrl.replace("/api",""),d=yield o.api.request(c+n);o.total=d.headers.get("Pagination-Total");const z=d.headers.get("Link"),G=o.api.parseLinkHeader(z);o.link=G.next;const b=yield d.json();o.addresses||(o.addresses=[]),o.addresses=[...o.addresses,...b],o.count++})()}onScroll(n){var o=this;return(0,f.Z)(function*(){console.log("scroll occurred",n),n.isReachingBottom&&(console.log("the user is reaching the bottom"),o.loading=!0,setTimeout((0,f.Z)(function*(){console.log("UPDATE RICH LIST",o.link),yield o.updateRichlist(o.link),o.loading=!1}))),n.isReachingTop&&console.log("the user is reaching the top"),n.isWindowEvent&&console.log("This event is fired on Window not on an element.")})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(I.s),t.Y36(Y.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-richlist"]],hostVars:2,hostBindings:function(n,o){1&n&&t.NdJ("scroll",function(d){return o.scrollHandler(d)}),2&n&&t.ekj("content-centered-top",o.hostClass)},decls:5,vars:2,consts:[[1,"box"],["class","centered",4,"ngIf"],[4,"ngIf"],[1,"centered"],[1,"grid-header","richlist"],[1,"right"],["appDetectScroll","",1,"scrollable",3,"bottomOffset","topOffset","onScroll"],["class","grid grid-odd-line richlist",4,"ngFor","ngForOf"],[1,"grid","grid-odd-line","richlist"],[1,"center"],[1,""],[3,"routerLink"],[1,"right","number",3,"innerHTML"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h3"),t._uU(2,"Richlist"),t.qZA(),t.YNc(3,Q,2,0,"app-progress",1),t.YNc(4,X,12,4,"div",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngIf",!o.addresses),t.xp6(1),t.Q6J("ngIf",o.addresses))},directives:[T.O5,B.t,N.f,T.sg,a.yS],pipes:[D.N],encapsulation:2}),i})()}];let K=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[a.Bz.forChild($),m.ot,v.vV,Z.t,e.Ps,p.Tx,r.Cv,u.si,g.SJ,R.JX,C.p0,x.Nh,y.X,U.y4,O.m,M.LD,H.c,J.d,L.AV,P.ZX,S.t,E.q,F.T]]}),i})()},809:(A,h,s)=>{s.d(h,{C:()=>v,N:()=>Z});var a=s(5e3),m=s(9205);let v=(()=>{class e{constructor(r){this.setup=r}transform(r){return this.setup.transformFormat(r)}}return e.\u0275fac=function(r){return new(r||e)(a.Y36(m.U,16))},e.\u0275pipe=a.Yjl({name:"amount",type:e,pure:!1}),e})(),Z=(()=>{class e{constructor(r){this.setup=r}transform(r){const u=this.setup.transformFormat(r);if(u.indexOf(".")>-1){const g=u.split(".");return`${g[0]}.<span class="decimals">${g[1]}</span>`}return u}}return e.\u0275fac=function(r){return new(r||e)(a.Y36(m.U,16))},e.\u0275pipe=a.Yjl({name:"amountHtml",type:e,pure:!1}),e})()}}]);