"use strict";(self.webpackChunkblockcore=self.webpackChunkblockcore||[]).push([[533],{1743:(B,h,o)=>{o.d(h,{q:()=>f});var u=o(5830),t=o(5e3),Z=o(9808),_=o(5245);function E(i,d){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const s=t.oxw(2);t.xp6(1),t.Oqu(s.details)}}function M(i,d){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const s=t.oxw(3);t.xp6(1),t.Oqu(s.details)}}function v(i,d){if(1&i&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&i){const s=t.oxw(3);t.xp6(1),t.Oqu(s.stack)}}function C(i,d){if(1&i&&(t.TgZ(0,"div",13),t.YNc(1,M,2,1,"div",9),t.YNc(2,v,2,1,"div",14),t._UZ(3,"br"),t.TgZ(4,"span",15),t._uU(5," Message: "),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.qZA(),t.qZA()),2&i){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.details),t.xp6(1),t.Q6J("ngIf",s.stack),t.xp6(5),t.Oqu(s.message)}}function A(i,d){if(1&i){const s=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t._UZ(2,"mat-icon",3),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div",6),t._uU(6," Something went wrong! "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"div",5),t.TgZ(9,"div",8),t.YNc(10,E,2,1,"div",9),t._UZ(11,"br"),t._UZ(12,"br"),t.TgZ(13,"span",10),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return c.detailsVisible=!c.detailsVisible}),t._UZ(14,"mat-icon",11),t.qZA(),t.qZA(),t.YNc(15,C,8,3,"div",12),t.qZA(),t.qZA(),t.qZA()}if(2&i){const s=t.oxw();t.xp6(2),t.Q6J("svgIcon","heroicons_outline:exclamation-circle"),t.xp6(8),t.Q6J("ngIf",s.details),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:information-circle"),t.xp6(1),t.Q6J("ngIf",s.detailsVisible)}}let f=(()=>{class i{constructor(){this.detailsVisible=!1}ngOnChanges(s){!this.error||(this.error instanceof u.o?404===this.error.code?(this.message="Not found (404)",this.details=this.error.url,this.stack=this.error.stack.toString()):(this.message=this.error.message+" ("+this.error.code+")",this.details=this.error.url,this.stack=this.error.stack.toString()):this.error instanceof Error?(this.message="Error occured: "+this.error.message,this.stack=this.error.stack.toString()):this.message=this.error)}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-error"]],inputs:{error:"error"},features:[t.TTD],decls:1,vars:1,consts:[["class","relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden",4,"ngIf"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-red-500","dark:text-red-400",3,"svgIcon"],[1,"flex","items-center"],[1,"flex","flex-col"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate","break-all","negative"],[1,"flex","items-center","mt-8"],[1,"font-medium","break-all"],[4,"ngIf"],["title","Show error details",1,"clickable",3,"click"],["matPrefix","",1,"icon-size-10","text-red-500",3,"svgIcon"],["class","error-details mt-8",4,"ngIf"],[1,"error-details","mt-8"],["class","error-details-stack",4,"ngIf"],[1,"text-red-500"],[1,"error-details-stack"]],template:function(s,n){1&s&&t.YNc(0,A,16,4,"div",0),2&s&&t.Q6J("ngIf",n.error)},directives:[Z.O5,_.Hw],encapsulation:2}),i})()},5533:(B,h,o)=>{o.r(h),o.d(h,{MempoolModule:()=>$});var u=o(4521),t=o(7423),Z=o(9832),_=o(4834),E=o(5245),M=o(2181),v=o(5899),C=o(508),A=o(2638),f=o(4847),i=o(4999),d=o(3251),s=o(7455),n=o(1244),c=o(4466),x=o(4107),p=o(7531),U=o(9828),L=o(7238),S=o(7261),b=o(9837),N=o(7237),k=o(5486),O=o(5861),e=o(5e3),R=o(5830),W=o(9205),Q=o(9364),Y=o(1743),J=o(9808),K=o(1656),F=o(2419);function V(l,g){1&l&&(e.TgZ(0,"app-progress",5),e._uU(1,"Loading transactions..."),e.qZA())}const H=function(l){return["../","transaction",l]};function j(l,g){if(1&l&&(e.TgZ(0,"div",9),e.TgZ(1,"span"),e.TgZ(2,"a",10),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&l){const r=g.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(2,H,r.transactionId)),e.xp6(1),e.Oqu(r.transactionId)}}function X(l,g){1&l&&(e.TgZ(0,"app-progress",5),e._uU(1,"Loading more transactions..."),e.qZA())}function z(l,g){if(1&l){const r=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",6),e.TgZ(2,"span"),e._uU(3,"Transaction ID"),e.qZA(),e.qZA(),e.TgZ(4,"div",7),e.NdJ("onScroll",function(y){return e.CHM(r),e.oxw().onScroll(y)}),e.YNc(5,j,4,4,"div",8),e._UZ(6,"br"),e.YNc(7,X,2,0,"app-progress",3),e.qZA(),e.qZA()}if(2&l){const r=e.oxw();e.xp6(4),e.Q6J("bottomOffset",400)("topOffset",400),e.xp6(1),e.Q6J("ngForOf",r.transactions),e.xp6(2),e.Q6J("ngIf",r.loading)}}const G=[{path:"",component:(()=>{class l{constructor(r,a,y,T){var m=this;this.api=r,this.router=a,this.setup=y,this.activatedRoute=T,this.hostClass=!0,this.detailsVisible=!1,this.loading=!1,this.count=0,this.limit=20,this.activatedRoute.paramMap.subscribe(function(){var D=(0,O.Z)(function*(P){m.transactions=null;try{m.error=null}catch(I){m.error=I}console.log(m.block);const q=yield m.api.getLastBlock(!1);m.lastBlockHeight=q.blockIndex;try{yield m.updateTransactions("/api/query/mempool/transactions?limit="+m.limit)}catch(I){m.error="{"===I.message[0]?JSON.parse(I.message):I}});return function(P){return D.apply(this,arguments)}}())}ngOnInit(){return(0,O.Z)(function*(){})()}navigateToBlock(r){this.router.navigate([this.setup.current,"explorer","block",r])}toggleDetails(){this.detailsVisible=!this.detailsVisible}ngOnDestroy(){}updateTransactions(r){var a=this;return(0,O.Z)(function*(){if(!r)return;const y=a.api.baseUrl.replace("/api",""),T=yield a.api.request(y+r);a.total=T.headers.get("Pagination-Total");const m=T.headers.get("Link"),D=a.api.parseLinkHeader(m);a.link=D.next;const P=yield T.json();a.transactions||(a.transactions=[]),a.transactions=[...a.transactions,...P],a.count++})()}onScroll(r){var a=this;return(0,O.Z)(function*(){console.log("scroll occurred",r),r.isReachingBottom&&(console.log("the user is reaching the bottom"),a.loading=!0,setTimeout((0,O.Z)(function*(){yield a.updateTransactions(a.link),a.loading=!1}))),r.isReachingTop&&console.log("the user is reaching the top"),r.isWindowEvent&&console.log("This event is fired on Window not on an element.")})()}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(R.s),e.Y36(u.F0),e.Y36(W.U),e.Y36(u.gz))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-mempool-component"]],hostVars:2,hostBindings:function(r,a){2&r&&e.ekj("content-centered-top",a.hostClass)},decls:11,vars:4,consts:[[1,"box"],[1,"fas","fa-cube"],[1,"centered",3,"error"],["class","centered",4,"ngIf"],[4,"ngIf"],[1,"centered"],[1,"grid-header"],["appDetectScroll","",1,"scrollable",3,"bottomOffset","topOffset","onScroll"],["class","grid grid-odd-line",4,"ngFor","ngForOf"],[1,"grid","grid-odd-line"],[1,"nonbreakable",3,"routerLink"]],template:function(r,a){1&r&&(e._UZ(0,"app-search"),e.TgZ(1,"div",0),e.TgZ(2,"h3"),e._UZ(3,"i",1),e._uU(4,"\xa0\xa0Mempool Details"),e.qZA(),e._UZ(5,"app-error",2),e.qZA(),e.TgZ(6,"div",0),e.TgZ(7,"h3"),e._uU(8),e.qZA(),e.YNc(9,V,2,0,"app-progress",3),e.YNc(10,z,8,4,"div",4),e.qZA()),2&r&&(e.xp6(5),e.Q6J("error",a.error),e.xp6(3),e.hij("Transactions (",a.total,")"),e.xp6(1),e.Q6J("ngIf",!a.transactions),e.xp6(1),e.Q6J("ngIf",a.transactions))},directives:[Q.g,Y.q,J.O5,K.t,F.f,J.sg,u.yS],encapsulation:2}),l})()}];let $=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[u.Bz.forChild(G),t.ot,Z.vV,_.t,E.Ps,M.Tx,v.Cv,C.si,A.SJ,f.JX,i.p0,d.Nh,n.X,s.y4,c.m,x.LD,p.c,U.d,L.AV,S.ZX,b.t,N.q,k.T]]}),l})()},9364:(B,h,o)=>{o.d(h,{g:()=>i});var u=o(5861),t=o(5e3),Z=o(5830),_=o(9205),E=o(4521),M=o(7261),v=o(7322),C=o(5245),A=o(7531),f=o(3075);let i=(()=>{class d{constructor(n,c,x,p){this.api=n,this.setup=c,this.router=x,this._snackBar=p,this.scheme=JSON.parse(localStorage.getItem("config")).scheme}ngOnDestroy(){}ngOnInit(){return(0,u.Z)(function*(){})()}inputType(n){return n.startsWith(this.setup.Network.NetworkWitnessPrefix)?"address":n.length<20?"index":n.length>30&&n.length<54?"address":"hash"}search(){var n=this;return(0,u.Z)(function*(){const c=n.searchTerm;switch(n.inputType(c)){case"index":{const p=parseInt(c,10);NaN!==p&&p>0?n.router.navigate([n.setup.current,"explorer","block",p]):n._snackBar.open("Explorer cannot detect your data type","retry",{duration:3e3,panelClass:[n.scheme]});break}case"address":n.router.navigate([n.setup.current,"explorer","address",c]);break;case"hash":{let p=null;try{p=yield n.api.getBlockByHash(c)}catch(U){}if(p)n.router.navigate([n.setup.current,"explorer","block",p.blockHash]);else{const U=yield n.api.getTransaction(c);n.router.navigate([n.setup.current,"explorer","transaction",U.transactionId])}break}default:n._snackBar.open("Explorer cannot detect your data type","retry",{duration:3e3,panelClass:[n.scheme]})}})()}}return d.\u0275fac=function(n){return new(n||d)(t.Y36(Z.s),t.Y36(_.U),t.Y36(E.F0),t.Y36(M.ux))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-search"]],decls:8,vars:3,consts:[[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-1","gap-6","w-full","min-w-0","mb-6"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"w-full","max-w-screen-xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","max-w-full","sm:max-w-none"],[1,"blockcore-mat-no-subscript","w-full","sm:w-full","mt-6","sm:mt-6","mb-6","sm:mb-6","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["type","search","placeholder","Search for address, transaction or block.","autocomplete","off","matInput","",3,"ngModel","keyup.enter","ngModelChange"],["query",""]],template:function(n,c){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"mat-form-field",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"input",6,7),t.NdJ("keyup.enter",function(){return c.search()})("ngModelChange",function(p){return c.searchTerm=p}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Q6J("floatLabel","always"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("ngModel",c.searchTerm))},directives:[v.KE,C.Hw,v.qo,A.Nt,f.Fj,f.JJ,f.On],encapsulation:2}),d})()}}]);