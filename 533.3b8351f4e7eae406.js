"use strict";(self.webpackChunkblockcore=self.webpackChunkblockcore||[]).push([[533],{5533:(w,v,t)=>{t.r(v),t.d(v,{MempoolModule:()=>k});var d=t(4521),u=t(7423),h=t(9832),Z=t(4834),T=t(5245),M=t(2181),x=t(5899),C=t(508),y=t(2638),A=t(4847),U=t(4999),J=t(3251),O=t(7455),I=t(1244),S=t(4466),B=t(4107),L=t(7531),Y=t(9828),F=t(7238),N=t(7261),Q=t(9837),V=t(7237),D=t(5486),l=t(5861),o=t(5e3),H=t(5830),R=t(9205),j=t(9364),X=t(1743),f=t(9808),z=t(1656),E=t(2419);function P(a,i){1&a&&(o.TgZ(0,"app-progress",5),o._uU(1,"Loading transactions..."),o.qZA())}const W=function(a){return["../","transaction",a]};function G(a,i){if(1&a&&(o.TgZ(0,"div",9),o.TgZ(1,"span"),o.TgZ(2,"a",10),o._uU(3),o.qZA(),o.qZA(),o.qZA()),2&a){const n=i.$implicit;o.xp6(2),o.Q6J("routerLink",o.VKq(2,W,n.transactionId)),o.xp6(1),o.Oqu(n.transactionId)}}function K(a,i){1&a&&(o.TgZ(0,"app-progress",5),o._uU(1,"Loading more transactions..."),o.qZA())}function $(a,i){if(1&a){const n=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",6),o.TgZ(2,"span"),o._uU(3,"Transaction ID"),o.qZA(),o.qZA(),o.TgZ(4,"div",7),o.NdJ("onScroll",function(c){return o.CHM(n),o.oxw().onScroll(c)}),o.YNc(5,G,4,4,"div",8),o._UZ(6,"br"),o.YNc(7,K,2,0,"app-progress",3),o.qZA(),o.qZA()}if(2&a){const n=o.oxw();o.xp6(4),o.Q6J("bottomOffset",400)("topOffset",400),o.xp6(1),o.Q6J("ngForOf",n.transactions),o.xp6(2),o.Q6J("ngIf",n.loading)}}const b=[{path:"",component:(()=>{class a{constructor(n,s,c,r){var e=this;this.api=n,this.router=s,this.setup=c,this.activatedRoute=r,this.hostClass=!0,this.detailsVisible=!1,this.loading=!1,this.count=0,this.limit=20,this.activatedRoute.paramMap.subscribe(function(){var m=(0,l.Z)(function*(g){e.transactions=null;try{e.error=null}catch(p){e.error=p}console.log(e.block);const q=yield e.api.getLastBlock(!1);e.lastBlockHeight=q.blockIndex;try{yield e.updateTransactions("/api/query/mempool/transactions?limit="+e.limit)}catch(p){e.error="{"===p.message[0]?JSON.parse(p.message):p}});return function(g){return m.apply(this,arguments)}}())}ngOnInit(){return(0,l.Z)(function*(){})()}navigateToBlock(n){this.router.navigate([this.setup.current,"explorer","block",n])}toggleDetails(){this.detailsVisible=!this.detailsVisible}ngOnDestroy(){}updateTransactions(n){var s=this;return(0,l.Z)(function*(){if(!n)return;const c=s.api.baseUrl.replace("/api",""),r=yield s.api.request(c+n);s.total=r.headers.get("Pagination-Total");const e=r.headers.get("Link"),m=s.api.parseLinkHeader(e);s.link=m.next;const g=yield r.json();s.transactions||(s.transactions=[]),s.transactions=[...s.transactions,...g],s.count++})()}onScroll(n){var s=this;return(0,l.Z)(function*(){console.log("scroll occurred",n),n.isReachingBottom&&(console.log("the user is reaching the bottom"),s.loading=!0,setTimeout((0,l.Z)(function*(){yield s.updateTransactions(s.link),s.loading=!1}))),n.isReachingTop&&console.log("the user is reaching the top"),n.isWindowEvent&&console.log("This event is fired on Window not on an element.")})()}}return a.\u0275fac=function(n){return new(n||a)(o.Y36(H.s),o.Y36(d.F0),o.Y36(R.U),o.Y36(d.gz))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-mempool-component"]],hostVars:2,hostBindings:function(n,s){2&n&&o.ekj("content-centered-top",s.hostClass)},decls:11,vars:4,consts:[[1,"box"],[1,"fas","fa-cube"],[1,"centered",3,"error"],["class","centered",4,"ngIf"],[4,"ngIf"],[1,"centered"],[1,"grid-header"],["appDetectScroll","",1,"scrollable",3,"bottomOffset","topOffset","onScroll"],["class","grid grid-odd-line",4,"ngFor","ngForOf"],[1,"grid","grid-odd-line"],[1,"nonbreakable",3,"routerLink"]],template:function(n,s){1&n&&(o._UZ(0,"app-search"),o.TgZ(1,"div",0),o.TgZ(2,"h3"),o._UZ(3,"i",1),o._uU(4,"\xa0\xa0Mempool Details"),o.qZA(),o._UZ(5,"app-error",2),o.qZA(),o.TgZ(6,"div",0),o.TgZ(7,"h3"),o._uU(8),o.qZA(),o.YNc(9,P,2,0,"app-progress",3),o.YNc(10,$,8,4,"div",4),o.qZA()),2&n&&(o.xp6(5),o.Q6J("error",s.error),o.xp6(3),o.hij("Transactions (",s.total,")"),o.xp6(1),o.Q6J("ngIf",!s.transactions),o.xp6(1),o.Q6J("ngIf",s.transactions))},directives:[j.g,X.q,f.O5,z.t,E.f,f.sg,d.yS],encapsulation:2}),a})()}];let k=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[d.Bz.forChild(b),u.ot,h.vV,Z.t,T.Ps,M.Tx,x.Cv,C.si,y.SJ,A.JX,U.p0,J.Nh,I.X,O.y4,S.m,B.LD,L.c,Y.d,F.AV,N.ZX,Q.t,V.q,D.T]]}),a})()}}]);